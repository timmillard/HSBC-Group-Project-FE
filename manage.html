<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Manager</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <style>

      /* LLM STYLING */
      #transactionTable thead th {
        background-color: #212529 !important;
        color: #fff !important;
      }

      #transactionTable tbody tr {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
      }
      #transactionTable tbody tr:hover {
        transform: scale(1.03);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        background-color: #f8f9fa !important;
      }

      .order-buy {
        color: #198754 !important; 
        font-weight: 600;
      }
      .order-sell {
        color: #dc3545 !important; 
        font-weight: 600;
      }

      #transactionTable {
        border-radius: 0.5rem;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .ticker {
        position: relative;
        overflow: hidden;
        border-radius: 0.5rem;
        background: #fff;
        border: 2px solid #000;
      }

      .ticker__track {
        display: inline-flex;
        gap: 3rem;
        padding: 0.5rem 1rem;
        white-space: nowrap;
        will-change: transform;
        animation: ticker-scroll var(--duration, 24s) linear infinite;
      }

      @keyframes ticker-scroll {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-50%);
        }
      }

      .ticker-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #000;
        font-weight: 500;
      }
      .ticker-item .symbol {
        letter-spacing: 0.3px;
      }

      .badge-up {
        background: rgba(25, 135, 84, 0.15);
        color: #198754;
        border: 1px solid #198754;
        border-radius: 0.375rem;
        padding: 0.125rem 0.375rem;
        font-weight: 600;
      }
      .badge-down {
        background: rgba(220, 53, 69, 0.15);
        color: #dc3545;
        border: 1px solid #dc3545;
        border-radius: 0.375rem;
        padding: 0.125rem 0.375rem;
        font-weight: 600;
      }
      .bg-dark .text-muted {
        color: rgba(255, 255, 255, 0.65) !important;
      }
      
    </style>
  </head>

  <body>
    <nav class="navbar bg-dark">
      <div class="container">
        <img
          src="/assets/logo.png"
          alt="Logo"
          width="10%"
          class="d-inline-block align-text-top"
        />
        <span class="nav-item text-light fs-5"
          >Welcome, <strong id="username">User</strong></span
        >
        <form id="logoutForm">
            <button class="btn btn-outline-light btn-bg-dark nav-item">Sign Out</button>
        </form>
      </div>
    </nav>

    <main class="container my-4">
      <div class="row pb-4 align-items-center" id="pageTitle">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h2 class="mb-0"><strong id="portfolioName">name_here</strong></h2>
            <p class="mb-0">
              Exchange: <strong id="portfolioExchange">exchange_here</strong>
            </p>
          </div>
          <a href="index.html" class="btn btn-outline-dark">Back</a>
        </div>
      </div>

      <div class="mb-3">
        <div class="ticker">
          <div class="ticker__track" id="weeklyTickerTrack"></div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-4 mb-3">
          <div class="card text-center border-dark shadow-sm h-100 bg-dark text-light">
            <div class="card-body py-3 d-flex flex-column justify-content-center">
              <h5 class="card-title text-light">Portfolio Value</h5>
              <h2 id="portfolioValue" class="fw-bold text-info">$0</h2>
            </div>
          </div>
        </div>

        <div class="col-md-8 mb-3">
          <div class="card border-dark shadow-sm h-100 bg-dark text-light">
            <div class="card-body">
              <h5 class="card-title text-light">Portfolio Stats</h5>
              <div class="row text-center mt-3">
                <div class="col-4">
                  <h6 class="text-muted">Stocks</h6>
                  <p id="portfolioStockCount" class="fw-bold">0</p>
                </div>
                <div class="col-4">
                  <h6 class="text-muted">Last Week</h6>
                  <p id="portfolioChangeWeek" class="fw-bold">0%</p>
                </div>
                <div class="col-4">
                  <h6 class="text-muted">Last Year</h6>
                  <p id="portfolioChangeYear" class="fw-bold">0%</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      

      <div class="row pb-4 align-items-stretch" id="mainPageContents">
        <div class="col-md-6 d-flex">
          <div class="card border-dark mb-3 w-100 h-100">
            <div class="card-header"><h4>Historical Performance</h4></div>
            <div class="card-body">
              <canvas id="cumulativeGrowthChart"></canvas>
            </div>
          </div>
        </div>

        <div class="col-md-6 d-flex">
          <div class="card border-dark mb-3 w-100 h-100">
            <div class="card-header"><h4>Portfolio Composition</h4></div>
            <div class="card-body">
              <canvas id="assetCompositionChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="row pb-4">
        <div class="col-md-6">
          <div class="container">
            <h4>Transaction History</h4>
            <table class="table table-striped" id="transactionTable">
              <thead>
                <tr>
                  <th>Ticker</th>
                  <th>Order Type</th>
                  <th>Quantity</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card border-dark mb-3 mt-4">
            <div class="card-header"><h4>Add an Asset</h4></div>
            <div class="card-body">
              <form id="addAssetForm">
                <div class="mb-3">
                  <label for="addTickerInput" class="form-label">Ticker</label>
                  <input type="text" class="form-control" id="addTickerInput" />
                </div>
                <div class="mb-3">
                  <label for="addQuantityInput" class="form-label"
                    >Quantity</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="addQuantityInput"
                  />
                </div>
                <button type="submit" class="btn btn-primary">Add Asset</button>
              </form>
            </div>
          </div>
          <div class="card border-dark mb-3">
            <div class="card-header"><h4>Buy and Sell</h4></div>
            <div class="card-body">
              <form id="transactionForm">
                <div class="mb-3">
                  <label for="transactionTickerInput" class="form-label"
                    >Ticker</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="transactionTickerInput"
                  />
                </div>
                <div class="mb-3">
                  <label for="transactionTypeInput" class="form-label"
                    >Transaction Type</label
                  >
                  <select class="form-select" id="transactionTypeInput">
                    <option value="buy">Buy</option>
                    <option value="sell">Sell</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="transactionQuantityInput" class="form-label"
                    >Quantity</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="transactionQuantityInput"
                    min="1"
                  />
                </div>
                <button type="submit" class="btn btn-primary">
                  Make Transaction
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
    <script type="text/javascript" src="js/endpoint.js"></script>
    <script type="text/javascript" src="js/modals.js"></script>
    <script type="text/javascript" src="js/manage.js"></script>
    <script type="text/javascript" src="js/logout.js"></script>
  </body>
</html>
